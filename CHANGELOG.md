# Changelog

All notable changes to this project will be documented in this file. See [standard-version](https://github.com/conventional-changelog/standard-version) for commit guidelines.

### [2.3.3](https://github.com/YoungSx/drive-collector-js/compare/v2.3.2...v2.3.3) (2025-12-25)

### ğŸ› é—®é¢˜ä¿®å¤

* **ä»»åŠ¡ç›‘æ§çœ‹æ¿**ï¼šä¿®å¤äº†åœ¨åˆ·æ–°ç»„ä»»åŠ¡çŠ¶æ€æ—¶å‘ç”Ÿçš„ `ReferenceError: safeEdit is not defined` é”™è¯¯ã€‚é€šè¿‡åœ¨ `TaskManager.js` ä¸­æ­£ç¡®å¯¼å…¥ `safeEdit` å·¥å…·å‡½æ•°ï¼Œç¡®ä¿äº†åª’ä½“ç»„ï¼ˆAlbumï¼‰ä»»åŠ¡è¿›åº¦çš„å®æ—¶æ›´æ–°ç¨³å®šæ€§ã€‚

### [2.3.2](https://github.com/YoungSx/drive-collector-js/compare/v2.3.1...v2.3.2) (2025-12-25)


### ğŸ”§ å…¶ä»–ä»»åŠ¡

* finalize atomic AIVM workflow for clean git history ([9bf5cd5](https://github.com/YoungSx/drive-collector-js/commit/9bf5cd50a08337109c26e6b8a2057897f199e907))


### âœ… æµ‹è¯•ç›¸å…³

* ä¸ºå†…å­˜æ³„æ¼ä¿®å¤æ·»åŠ æµ‹è¯•ç”¨ä¾‹ ([062c8e1](https://github.com/YoungSx/drive-collector-js/commit/062c8e1acb5649739b5206e21b5e2d9f681d4524))


### ğŸš€ æ€§èƒ½ä¼˜åŒ–

* ä¿®å¤å†…å­˜æ³„æ¼é£é™©ï¼Œåœ¨TaskRepositoryä¸­æ·»åŠ å®šæœŸæ¸…ç†æœºåˆ¶ ([0bccdbc](https://github.com/YoungSx/drive-collector-js/commit/0bccdbcff1487503b7561087b868d25aea1534bb))
* ä¼˜åŒ–é”™è¯¯å¤„ç†ï¼Œç§»é™¤ç©ºçš„catchå—å¹¶æä¾›è¯¦ç»†é”™è¯¯ä¿¡æ¯ ([4a34883](https://github.com/YoungSx/drive-collector-js/commit/4a348837a5088bba99fdc4d5a940714ca47e541b))
* ä¼˜åŒ–ç¼“å­˜ç­–ç•¥ï¼ŒåŸºäºæ–‡ä»¶å˜åŒ–é¢‘ç‡åŠ¨æ€è°ƒæ•´ç¼“å­˜æ—¶é—´ ([b63e338](https://github.com/YoungSx/drive-collector-js/commit/b63e33885d3ae5c6fcc8c4f44f58c89ae542c7fc))
* ä¼˜åŒ–æ•°æ®åº“æ‰¹é‡æ“ä½œï¼Œåœ¨ä»»åŠ¡æ¢å¤æ—¶ä½¿ç”¨æ‰¹é‡æ›´æ–°å’Œå¹¶å‘å¤„ç† ([616811e](https://github.com/YoungSx/drive-collector-js/commit/616811e4fa6ae94a0017d71b0982797548b67293))
* ä¼˜åŒ–æ•°æ®åº“æ‰¹é‡æ“ä½œï¼Œåœ¨ä»»åŠ¡æ¢å¤æ—¶ä½¿ç”¨æ‰¹é‡æ›´æ–°å’Œå¹¶å‘å¤„ç† ([1a91408](https://github.com/YoungSx/drive-collector-js/commit/1a91408c59989c5adfe2ef77e2af1e5f52368c46))
* ä¼˜åŒ–æ–‡ä»¶å¤„ç†ï¼Œæ›¿æ¢åŒæ­¥æ–‡ä»¶æ“ä½œä¸ºå¼‚æ­¥æ“ä½œ ([08b0960](https://github.com/YoungSx/drive-collector-js/commit/08b096099d51eac18317a50cce19e5b68efcf89c))
* ä¼˜åŒ–é™æµå™¨æ€§èƒ½ï¼Œæ¶ˆé™¤CPUæµªè´¹çš„whileå¾ªç¯ ([1c8156f](https://github.com/YoungSx/drive-collector-js/commit/1c8156f83785a939a4fde97ac20f0a8d3ab4b860))
* ä¼˜åŒ–å¾ªç¯æ€§èƒ½ï¼Œåœ¨updateQueueUIä¸­ä½¿ç”¨æ›´é«˜æ•ˆçš„å»¶è¿Ÿæ§åˆ¶ ([e61d04c](https://github.com/YoungSx/drive-collector-js/commit/e61d04c4c74228dde5c99e5b049342003c673829))
* ä¼˜åŒ–é¢„åŠ è½½æ•°æ®ï¼Œæå‡ç³»ç»Ÿå¯åŠ¨æ€§èƒ½ ([1e5c42b](https://github.com/YoungSx/drive-collector-js/commit/1e5c42b8a28ce0e577d3e9b35c6e6beea581cd1c))
* ä¼˜åŒ–DriveRepositoryæŸ¥è¯¢æ€§èƒ½ - ä¸ºfindAll()æ·»åŠ 5åˆ†é’Ÿç¼“å­˜æœºåˆ¶ ([79b1133](https://github.com/YoungSx/drive-collector-js/commit/79b113335062cdceb00db077e27de8988fc2e4ef))
* ä¼˜åŒ–TaskManageråˆå§‹åŒ– - å®ç°å¼‚æ­¥æ“ä½œå¹¶è¡ŒåŒ–ï¼Œæå‡å¯åŠ¨æ€§èƒ½ ([4390f57](https://github.com/YoungSx/drive-collector-js/commit/4390f575dfcdf37aee1d5bdc4a4582d1e98d9de9))
* ä¼˜åŒ–TaskManageræ‰¹é‡æ•°æ®åº“æ“ä½œ - æ·»åŠ batchUpdateStatusæ–¹æ³•å¹¶åœ¨ç»„ä»»åŠ¡å®Œæˆæ—¶ä½¿ç”¨ ([1644421](https://github.com/YoungSx/drive-collector-js/commit/1644421264fb5b04a9c8293671e8c6fd8fb05d6e))
* ä¼˜åŒ–UIæ›´æ–°èŠ‚æµæœºåˆ¶ï¼ŒåŸºäºä»»åŠ¡çŠ¶æ€å’Œè¿›åº¦åŠ¨æ€è°ƒæ•´èŠ‚æµæ—¶é—´ ([f69aa58](https://github.com/YoungSx/drive-collector-js/commit/f69aa5857d40d738f4ed0f8288c956ce56c070d6))


### ğŸ› é—®é¢˜ä¿®å¤

* ä¿®å¤æµ‹è¯•è¯­æ³•é”™è¯¯ï¼Œç§»é™¤ä¸å…¼å®¹çš„await importè¯­æ³• ([846aa3e](https://github.com/YoungSx/drive-collector-js/commit/846aa3e02a9a304c2d674c76a5d80b901d3602f1))
* ä¿®å¤æµ‹è¯•fake timersè­¦å‘Šï¼Œæ¡ä»¶æ€§æ¸…ç†å®šæ—¶å™¨ ([a759423](https://github.com/YoungSx/drive-collector-js/commit/a7594238b694fbfaf47e3360b098b85fcdf0672b))
* ä¿®å¤æ‰€æœ‰npm testæµ‹è¯•å¤±è´¥é—®é¢˜ ([29fbfce](https://github.com/YoungSx/drive-collector-js/commit/29fbfce5dfdb4cd2aff54e27e0fb6d8e29cff1d5))
* ä¿®å¤æœ€åçš„æµ‹è¯•å¤±è´¥é—®é¢˜ ([d12845f](https://github.com/YoungSx/drive-collector-js/commit/d12845f28688889e5492a4c3e4229b7640adee36))
* ä¿®å¤files.slice is not a functioné”™è¯¯ ([2221578](https://github.com/YoungSx/drive-collector-js/commit/22215782358136b9bf24a652907ca72eaca87052))
* ä¿®å¤npm testå¼‚æ­¥æ“ä½œæ¸…ç†é—®é¢˜ ([aef32c2](https://github.com/YoungSx/drive-collector-js/commit/aef32c261d37effcc9080149563743e4bc6043d9))
* é‡æ–°åˆ›å»ºTaskRepositoryç¼“å­˜æµ‹è¯•æ–‡ä»¶ï¼Œä¿®å¤è¯­æ³•é”™è¯¯ ([9e801d3](https://github.com/YoungSx/drive-collector-js/commit/9e801d3700a66b27530c2d83f29acbbe577afb32))
* **æ–‡ä»¶åˆ—è¡¨å‘½ä»¤**ï¼šä¿®å¤å¼‚æ­¥é”™è¯¯ä¸­çš„TypeErrorï¼Œç¡®ä¿æ–‡ä»¶åˆ—è¡¨åŠŸèƒ½æ­£å¸¸å·¥ä½œï¼Œæå‡ç”¨æˆ·ä½“éªŒç¨³å®šæ€§ã€‚

### [2.3.1](https://github.com/YoungSx/drive-collector-js/compare/v2.3.0...v2.3.1) (2025-12-24)


### ğŸ› é—®é¢˜ä¿®å¤

* **è¿æ¥ç¨³å®šæ€§**ï¼šä¿®å¤Telegramè¿æ¥è¶…æ—¶å’Œæ•°æ®ä¸­å¿ƒåˆ‡æ¢é—®é¢˜ï¼Œå¤§å¹…æå‡æ–‡ä»¶ä¸‹è½½çš„æˆåŠŸç‡å’Œç³»ç»Ÿç¨³å®šæ€§ã€‚é€šè¿‡ä¼˜åŒ–è¿æ¥å‚æ•°ã€é‡è¯•æœºåˆ¶å’Œå¹¶å‘æ§åˆ¶ï¼Œè§£å†³äº†"Not connected"å’Œ"File lives in another DC"ç­‰å¸¸è§è¿æ¥é”™è¯¯ã€‚

## [2.3.0](https://github.com/YoungSx/drive-collector-js/compare/v2.2.5...v2.3.0) (2025-12-24)


### âœ¨ æ–°ç‰¹æ€§

* **æ™ºèƒ½é˜Ÿåˆ—åˆ†ç¦»**ï¼šå°†æ–‡ä»¶ä¸‹è½½å’Œä¸Šä¼ æµç¨‹åˆ†ç¦»ä¸ºç‹¬ç«‹é˜Ÿåˆ—ï¼Œå¤§å¹…æå‡ç³»ç»Ÿå¹¶å‘å¤„ç†èƒ½åŠ›ã€‚ä¸‹è½½é˜Ÿåˆ—ä¸“æ³¨å¤„ç†Telegramæ–‡ä»¶è·å–ï¼Œä¸Šä¼ é˜Ÿåˆ—ä¸“é—¨ç®¡ç†äº‘ç«¯è½¬å­˜ï¼Œä¸¤è€…äº’ä¸å¹²æ‰°ï¼Œæ˜¾è‘—æé«˜äº†æ•´ä½“å¤„ç†æ•ˆç‡å’Œç³»ç»Ÿç¨³å®šæ€§ã€‚

### [2.2.6](https://github.com/YoungSx/drive-collector-js/compare/v2.2.5...v2.2.6) (2025-12-24)

### [2.2.5](https://github.com/YoungSx/drive-collector-js/compare/v2.2.3...v2.2.5) (2025-12-24)


### ğŸ› é—®é¢˜ä¿®å¤

* **Telegram è¿æ¥**: ä¿®å¤åº”ç”¨å¯åŠ¨æ—¶çš„ AUTH_KEY_DUPLICATED é”™è¯¯ï¼Œæ·»åŠ è‡ªåŠ¨ Session æ¸…ç†å’Œé‡è¯•æœºåˆ¶ï¼Œæå‡è¿æ¥ç¨³å®šæ€§ã€‚

### [2.2.4](https://github.com/YoungSx/drive-collector-js/compare/v2.2.3...v2.2.4) (2025-12-24)


### âœ… è´¨é‡ä¿éšœ

* **ä»£ç æ–‡æ¡£**: å®Œå–„äº† TaskRepository å’Œ D1 æœåŠ¡ç±»çš„æ–‡æ¡£æ³¨é‡Šï¼Œæå‡ä»£ç å¯è¯»æ€§ã€‚
* **æµ‹è¯•ä¼˜åŒ–**: è°ƒæ•´äº†ç›¸å…³å•å…ƒæµ‹è¯•ç”¨ä¾‹ï¼Œç¡®ä¿æµ‹è¯•è¦†ç›–ç‡çš„ç¨³å®šæ€§å’Œå‡†ç¡®æ€§ã€‚

### [2.2.3](https://github.com/YoungSx/drive-collector-js/compare/v2.2.2...v2.2.3) (2025-12-24)


### ğŸ› é—®é¢˜ä¿®å¤

* resolve D1 batch error and prevent data loss in flushUpdates ([82d119b](https://github.com/YoungSx/drive-collector-js/commit/82d119b52f6f136a5bcdc74bc2020e838a3510b0))
* sanitize user input and variables in messages to prevent HTML rendering issues ([d6df339](https://github.com/YoungSx/drive-collector-js/commit/d6df339be01c308a320deacc23b64354fcc3e841))

### [2.2.2](https://github.com/YoungSx/drive-collector-js/compare/v2.2.1...v2.2.2) (2025-12-24)


### âœ… è´¨é‡ä¿éšœ

* **æµ‹è¯•ä¿®å¤**: ä¿®å¤äº† Rclone æ‰¹é‡ä¸Šä¼ ã€Telegram æœåŠ¡å’Œ UI åŠ©æ‰‹çš„å•å…ƒæµ‹è¯•ç”¨ä¾‹ï¼Œè§£å†³äº†ä¾èµ–å†²çªå’Œ Mock ä¸æ­£ç¡®çš„é—®é¢˜ï¼Œç¡®ä¿ CI/CD æµç¨‹çš„ç¨³å®šè¿è¡Œã€‚

### [2.2.1](https://github.com/YoungSx/drive-collector-js/compare/v2.2.0...v2.2.1) (2025-12-24)


### ğŸ› é—®é¢˜ä¿®å¤

* **çŠ¶æ€æ˜¾ç¤º**: ä¿®å¤äº†åœ¨æ²¡æœ‰ç­‰å¾…ä»»åŠ¡æ—¶ï¼Œç³»ç»ŸçŠ¶æ€é¢æ¿ä¸­â€œç­‰å¾…ä¸­çš„ä»»åŠ¡â€æ•°é‡é”™è¯¯æ˜¾ç¤ºä¸ºå ä½ç¬¦çš„é—®é¢˜ã€‚

## [2.2.0](https://github.com/YoungSx/drive-collector-js/compare/v2.1.4...v2.2.0) (2025-12-24)


### âœ¨ ç”¨æˆ·ä½“éªŒ
* **æ¬¢è¿æ¶ˆæ¯**: ä¼˜åŒ–æ¬¢è¿æ¶ˆæ¯çš„æ’ç‰ˆæ ¼å¼ï¼Œæå‡å‘½ä»¤åˆ—è¡¨çš„å¯è¯»æ€§ã€‚

### ğŸ›¡ï¸ ç¨³å®šæ€§
* **æ•°æ®åº“**: ä¼˜åŒ– D1 æ•°æ®åº“æ‰¹é‡æ“ä½œçš„é”™è¯¯å¤„ç†é€»è¾‘ï¼Œæå‡æ•°æ®æ“ä½œçš„å¯é æ€§ã€‚

### [2.1.4](https://github.com/YoungSx/drive-collector-js/compare/v2.1.2...v2.1.4) (2025-12-24)

### ğŸ› é—®é¢˜ä¿®å¤
* **æ–‡ä»¶åˆ—è¡¨æœåŠ¡**: ä¿®å¤äº† Rclone `lsjson` åœ¨ç›®å½•ä¸å­˜åœ¨æ—¶æŠ¥é”™çš„é—®é¢˜ï¼Œå¢å¼ºäº†è·¯å¾„æ£€æµ‹çš„é²æ£’æ€§ã€‚
* **åˆ†å‘å™¨é€»è¾‘**: è§£å†³äº† `Dispatcher` ä¸­ `PRIORITY` å˜é‡æœªå®šä¹‰çš„ ReferenceErrorï¼Œæ¢å¤äº† `/files` å‘½ä»¤çš„æ­£å¸¸å“åº”ã€‚
* **å•å…ƒæµ‹è¯•**: ä¿®å¤äº† `TaskManager` å’Œ `CloudTool` çš„å¤šä¸ªå•å…ƒæµ‹è¯•ç”¨ä¾‹ï¼Œæé«˜äº†æµ‹è¯•å¥—ä»¶çš„ç¨³å®šæ€§ã€‚

### [2.1.2](https://github.com/YoungSx/drive-collector-js/compare/v2.1.1...v2.1.2) (2025-12-24)

### ğŸ”§ è§„åˆ™ä¼˜åŒ–
* **å‘å¸ƒæµç¨‹é©æ–°**: ä¼˜åŒ– AI ç‰ˆæœ¬ç®¡ç†è§„åˆ™ï¼Œå®ç°ç‰ˆæœ¬å·ä¸ Commit ä¿¡æ¯è§£è€¦ã€‚
* **è‡ªåŠ¨åŒ–è„šæœ¬å‡çº§**: è°ƒæ•´ `release-ai` è„šæœ¬ï¼Œæ”¯æŒé™é»˜ç”Ÿæˆä¸ AI é©±åŠ¨çš„æ€»ç»“æ€§æäº¤ã€‚

### [2.1.1](https://github.com/YoungSx/drive-collector-js/compare/v2.1.0...v2.1.1) (2025-12-24)

### âœ¨ æ ¸å¿ƒåŠŸèƒ½
* **æ–°å¢å¸®åŠ©èœå•**: å®ç° `/help` å‘½ä»¤ï¼Œæä¾›è¯¦ç»†çš„ä½¿ç”¨æŒ‡å—ï¼Œå¹¶è‡ªåŠ¨æ˜¾ç¤ºå½“å‰ç‰ˆæœ¬å·ã€‚
* **åˆ†å‘é€»è¾‘ä¼˜åŒ–**: åœ¨ `Dispatcher` ä¸­å¼•å…¥ `fs` å’Œ `path` æ¨¡å—ä»¥æ”¯æŒç‰ˆæœ¬è¯»å–ã€‚

## 2.1.0 (2025-12-24)

### âœ¨ æ ¸å¿ƒåŠŸèƒ½
* **è‡ªåŠ¨åŒ–å‘å¸ƒæµ**: å¼•å…¥åŸºäº AI é©±åŠ¨çš„è‡ªåŠ¨åŒ–ç‰ˆæœ¬å‘å¸ƒå·¥ä½œæµï¼Œé›†æˆ `standard-version` å®ç°è¯­ä¹‰åŒ–ç‰ˆæœ¬ç®¡ç†ã€‚
* **é™æµç­–ç•¥ä¼˜åŒ–**: 
    * å¼•å…¥åˆ†å¸ƒå¼é¢‘ç‡é™åˆ¶ä¸ä»»åŠ¡ä¼˜å…ˆçº§è°ƒåº¦ç³»ç»Ÿã€‚
    * å®ç°è‡ªé€‚åº”é€Ÿç‡é™åˆ¶ï¼ˆAuto-scalingï¼‰ï¼ŒåŠ¨æ€è°ƒæ•´ Telegram Bot API ä¸ MTProto çš„å¹¶å‘æ•°ã€‚
    * å¢åŠ  Auth æ•æ„Ÿæµç¨‹çš„ä¼˜å…ˆçº§æ„ŸçŸ¥é™æµã€‚
* **å¤šç”¨æˆ·æ¶æ„**: 
    * å®ç°å¤šç”¨æˆ·æ¶æ„åŠäº¤äº’å¼äº‘ç›˜ç™»å½•ï¼Œå¢å¼ºç§Ÿæˆ·éš”ç¦»ä¸å®‰å…¨æ€§ã€‚
    * æ”¯æŒä»»åŠ¡æŒä¹…åŒ–ä¸ D1 æ•°æ®åº“æ¢å¤ï¼Œç¡®ä¿ç³»ç»Ÿé‡å¯åçš„ä»»åŠ¡è¿ç»­æ€§ã€‚
* **æ–‡ä»¶ç®¡ç†å¢å¼º**: 
    * å®ç°ç»Ÿä¸€çš„ç½‘ç›˜ç®¡ç†ä¸çŠ¶æ€ç›‘æ§æŒ‡ä»¤ç³»ç»Ÿã€‚
    * ä¼˜åŒ–ç½‘ç›˜é…ç½®æµç¨‹ï¼Œæ”¯æŒ `/logout` æ³¨é”€åŠŸèƒ½ã€‚
    * å¼•å…¥å†…å­˜çº§æ–‡ä»¶åˆ—è¡¨ç¼“å­˜ï¼Œå¤§å¹…æå‡åˆ†é¡µæµè§ˆæ€§èƒ½ã€‚
* **UI/UX ä¼˜åŒ–**: 
    * å…¨é¢ä¼˜åŒ–ç§»åŠ¨ç«¯ UI å¸ƒå±€ï¼Œå¼•å…¥æ™ºèƒ½æ–‡ä»¶åç¼©å†™ä¸ç®€æ´çŠ¶æ€æ ‡ç­¾ã€‚
    * å®æ—¶æ˜¾ç¤ºä¸Šä¼ è¿›åº¦ï¼Œæ”¯æŒç‚¹å‡»æ–‡ä»¶é“¾æ¥è·³è½¬è‡³åŸå§‹æ¶ˆæ¯ã€‚

### ğŸš€ æ€§èƒ½ä¸ç¨³å®šæ€§
* **è‡ªé€‚åº”ç¼©æ”¾**: è‡ªåŠ¨ç›‘æ§ API æˆåŠŸç‡å¹¶å®æ—¶è°ƒæ•´å¹¶å‘ï¼ˆBot API: 20-30 QPS, MTProto: 3-8 å¹¶å‘ï¼‰ã€‚
* **ä¸‹è½½ç¨³å®šæ€§**: å°†ä¸‹è½½å—å¤§å°æå‡è‡³ 1MBï¼Œå¢å¼ºå¤§æ–‡ä»¶ä¼ è¾“çš„ç¨³å®šæ€§ã€‚
* **ç¼“å­˜ç³»ç»Ÿ**: åœ¨ Driveã€Settings å’Œ Task ä»“åº“ä¸­å…¨é¢å¼•å…¥å¤šçº§ç¼“å­˜æœºåˆ¶ã€‚

### ğŸ› é—®é¢˜ä¿®å¤
* **éš”ç¦»æ€§ä¿®å¤**: ä¿®å¤å¤šç§Ÿæˆ·éš”ç¦»å¤±æ•ˆé—®é¢˜ï¼Œé€šè¿‡è¿æ¥å­—ç¬¦ä¸²æ¨¡å¼ç¡®ä¿æ•°æ®å®‰å…¨ã€‚
* **è¿è¡Œæ—¶é”™è¯¯**: è§£å†³è‡ªé€‚åº”é™æµä¸­çš„ `ReferenceError` å’Œä½œç”¨åŸŸç»‘å®šé—®é¢˜ã€‚
* **åˆå§‹åŒ–ä¼˜åŒ–**: å®ç°éé˜»å¡å¼åˆå§‹åŒ–ï¼Œæå‡æœºå™¨äººå¯åŠ¨å“åº”é€Ÿåº¦ã€‚

### âœ… è´¨é‡ä¿éšœ
* **æµ‹è¯•è¦†ç›–**: æ„å»ºå®Œæ•´çš„å•å…ƒæµ‹è¯•å¥—ä»¶ï¼Œæ¶µç›–æ ¸å¿ƒæ¨¡å—ã€Rclone æœåŠ¡åŠ Repository æ¨¡å¼ï¼Œæ•´ä½“è¦†ç›–ç‡æ˜¾è‘—æå‡ã€‚
* **CI/CD**: å¼•å…¥è‡ªåŠ¨åŒ–æµ‹è¯•æµæ°´çº¿ï¼Œç¡®ä¿ä»£ç æäº¤è´¨é‡ã€‚