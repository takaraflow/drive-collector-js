# AI 版本管理与自动化发布规则

作为项目的 AI 开发助手，你必须严格遵守以下版本管理流程：

## 1. 提交规范 (Conventional Commits)
每次提交代码时，Commit Message 必须遵循以下格式：
- `feat: ...` - 新功能
- `fix: ...` - 修复 Bug
- `docs: ...` - 文档更新
- `chore: ...` - 琐碎任务（如更新依赖、配置等）
- `refactor: ...` - 代码重构
- `test: ...` - 测试相关

## 2. 自动化发布流程 (AIVM)
当你完成了一组逻辑连贯的修改，或者用户要求发布版本时，请执行以下操作：

1. **执行发布脚本**：运行 `npm run release:ai`。
2. **润色 Changelog**：
   - 脚本运行后会更新 `CHANGELOG.md`。
   - 你必须读取 `CHANGELOG.md` 的最新部分，将其中的英文条目翻译并润色为**中文**。
   - 描述应侧重于“业务影响”（例如：“修复了 Google Drive 链接解析失败的问题”而非“修改了 LinkParser.js 的 regex”）。
3. **大版本处理**：
   - 如果检测到主版本号（Major）变更，你必须重新整理该版本号下的所有内容。
   - 将琐碎的修复合并为“稳定性提升”，突出核心的新功能模块。
4. **完成发布**：
   - 润色完成后，执行：`git add . && git commit --amend --no-edit && git tag -f v[新版本号]`。
   - 最后提示用户执行 `git push --follow-tags`。

## 3. 触发时机
- 每次完成 `feat` 或 `fix` 且测试通过后，应主动询问用户是否需要执行 `npm run release:ai`。
- 如果用户手动修改了 `package.json` 中的版本号，下次发布时视为“大版本重整”流程。